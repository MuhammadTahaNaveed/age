name: Create production promotion pull request
on:
  issue_comment:                                     
    types: [created]

jobs:
  TriggerOnComment:
    if: ${{ github.event.issue.pull_request }}    # check if the comments come from pull request, exclude those from issue.
    runs-on: ubuntu-latest

    steps:
      - name: Check Keyword and author
        id: trigger
        if: |                                                   # check the keyword and authors
          contains('["/sync"]', github.event.comment.body) &&
          contains('["MuhammadTahaNaveed"]', github.actor)
        run: |
          echo "Author and keyword verified.... Triggering event"
        
      - name: Exit the job if keyword and author unverified
        if: ${{ steps.trigger.conclusion == 'skipped' }}
        run: exit 1

  SyncPR:
    needs: TriggerOnComment
    runs-on: ubuntu-latest

    steps:
      - name: lets check first
        run: |
          echo 'hello'
      # - uses: actions/checkout@v3
      #   with:
      #     ref: PG15
      # - name: Reset promotion branch
      #   run: |
      #     git fetch origin auto-sync-pr
      #     git reset --hard origin/auto-sync-pr
      # - name: Create Pull Request
      #   uses: peter-evans/create-pull-request@v5
      #   with:
      #     branch: apply-pr